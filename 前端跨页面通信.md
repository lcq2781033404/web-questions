这个问题面试的时候碰到过，当时没有答全，在这里总结一下。平时工作中这种跨页面通信的场景也会经常遇到。

### 一. 同源页面间通信

#### 1. localStorage
第一个想到的肯定就是本地存储localStorage了（注意：**sessionStorage无法跨页面通信，因为关闭页面sessionStorage的数据就会清空，即sessionStorage是页面独享的，所以不同页面的sessionStorage都是独立的**）。localStorage存取数据的API就不介绍了，这里重点介绍一个localStorage的事件（**storage事件**），先上代码：

```javascript
window.addEventListener('storage', function (e) {
    if (e.key === 'dataKey') {
        console.log(e.newValue);
    }
});
```

**storage事件就是localStorage跨页面通信的关键**，看网上很多博客对localStorage的setItem方法进行了重新，在里面触发自定义事件来监听localStorage值的改变，其实完全没必要，直接监听storage事件就可以了，在回调函数中可以通过e.key获取到发生改变的localStorage的key，通过e.newValue获取到最新的值，使用这个事件需要注意以下几点：

- 不能在一个页面里面监听storage事件并触发setItem方法（这样也没有意义），**监听storage事件的页面和触发setItem的页面必须是两个不同的页面**！
- 上面说到必须是两个页面，**这两个页面同时必须是同源的**，也就是不能跨域，因为localStorage只有同源才能共享。

### 二. 非同源页面间通信
